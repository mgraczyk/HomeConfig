#!/bin/sh
export ARCHSTRING="--model_smt 1 --model_b2b 1 --fe_fetch_packets_max 3 --smt_slots 8 --l2cache_fast 0"
if [[ "$1" == *cache* ]]; then
	export ARCHSTRING=:"$ARCHSTRING --cachedebugfile cache.log"
fi

SIM_PATH=/local/ssd/dev/arch/bin/sim
if [[ "$1" == *debug* ]]; then 
   SIM_BIN="gdb --args $SIM_PATH"
else
   SIM_BIN="$SIM_PATH"
fi

$SIM_BIN --timing --quiet --uarchtrace_print_tag_info 1 --uarchtrace utrace.log --l2cachetrace l2trace.log *.exe
#$SIM_BIN --timing --quiet *.exe
#$SIM_BIN --quiet *.exe

